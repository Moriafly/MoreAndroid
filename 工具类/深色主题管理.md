```kotlin
import android.content.Context
import android.content.res.Configuration
import androidx.appcompat.app.AppCompatDelegate
import androidx.core.content.edit

/**
 * 深色主题工具类
 * @version 1.1.0
 * @author Moriafly
 * @since 2020/8/20
 */

object DarkThemeUtil {
    private const val DATA_NAME = "foyou" // 存储深色模式状态的文件名，自行更改
    /**
     * 判断是否开启了深色模式
     */
    fun isDarkTheme(context: Context): Boolean {
        val flag = context.resources.configuration.uiMode and
                Configuration.UI_MODE_NIGHT_MASK
        return flag == Configuration.UI_MODE_NIGHT_YES
    }

    /**
     * 打开深色模式
     */
    fun openDarkTheme() {
        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES)
    }

    /**
     * 关闭深色模式
     */
    fun closeDarkTheme() {
        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO)
    }

    /**
     * 写入内存数据
     * 将当前的深色模式状态保持到内存，下次启动 APP 以读取
     * @param context Context
     * @param state 深色模式状态，true 打开状态，false 关闭状态
     */
    fun writeDarkThemeState(context: Context, state: Boolean) {
        context.getSharedPreferences(DATA_NAME, Context.MODE_PRIVATE)
            .edit{ putBoolean("boolean_dark_theme_state", state) }
    }

    /**
     * 读取内存数据
     */
    fun readDarkThemeState(context: Context): Boolean {
        return context.getSharedPreferences(DATA_NAME, Context.MODE_PRIVATE)
            .getBoolean("boolean_dark_theme_state", false)
    }
}


```

